---
title: "Ransomware en mundo"
author: "Rodrigo Vera & Jhonatan"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
---

```{r setup, include = FALSE}

knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

A partir de una base de datos actualizada de los distintos tipos de ransomware registrados en el mundo hasta el d√≠a de hoy. Se muestra en un entorno grafico el impacto del ransomware en el mundo.

## 1. Biblioteca

Para llevar acabo esta practica se utiliza esta biblioteca:

```{r file_load, error=FALSE}
source("../R/code.R")
```

## 2. Datos estructurados

Para obtener un data frame, se utiliza esta funcion:

```{r get_df}
df <- obtenerDf()
```

Se obtiene un data frame de **`r length(df$Country)`** elementos. Que tienen la siguinete estructura:

```{r, echo=FALSE}
head(df, n=3)
```

## 3. Figuras

Se mostraran 3 tipos de graficos

### 3.1	Mundiales

Primero se mostrara tres graficos mundiales:

```{r, fig.width=8, fig.height=4, mund_1, include=TRUE}
library(RColorBrewer)
sPDF <- joinCountryData2Map(df,
                            joinCode = "ISO2",
                            nameJoinColumn = "Country",
                            verbose = F)

# plot the spatialDataFrame
colourPalette <- brewer.pal(5,'RdYlGn')
mapCountryData(sPDF, nameColumnToPlot = "Malware", colourPalette=colourPalette, catMethod=c(0,20,40,60,80,100))
```

```{r, fig.width=8, fig.height=4, mund_2, include=TRUE}
mapCountryData(sPDF, nameColumnToPlot = "Threat", colourPalette=colourPalette, catMethod=c(0,20,40,60,80,100))
```

```{r, fig.width=8, fig.height=4, mund_3, include=TRUE}
mapCountryData(sPDF, nameColumnToPlot = "Status", colourPalette=colourPalette, catMethod=c(0,20,40,60,80,100))
```

### 3.2	De Barras

Este grafico de barras relaciona, cada malware con su threat y su estado:

```{r, fig.width=8, fig.height=4, plot_bar, include=TRUE}
ggplot(data=df, aes(x=Threat, y=Malware, fill=Status)) + 
  geom_bar(stat="identity", position="dodge")
```

### 3.3 Lineal

Este grafico anliza la vida de cada malware:

```{r, fig.width=8, fig.height=4, plot_time, include=TRUE}
ggplot(df, aes(Firstseen_UTC, Malware)) + 
  geom_line(aes(color = Malware), size = 1) +
  theme_minimal()
```